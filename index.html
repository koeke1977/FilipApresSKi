<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Photobooth Foto‚Äôs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #111;
      color: #fff;
    }

    header {
      padding: 16px;
      text-align: center;
      position: sticky;
      top: 0;
      background: #111;
      z-index: 10;
    }

    button {
      padding: 10px 18px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    #status {
      text-align: center;
      margin-top: 20px;
      opacity: 0.8;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 12px;
      padding: 12px;
    }

    .grid img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 12px;
      background: #222;
    }
  </style>
</head>
<body>

<header>
  <h1>üì∏ Photobooth Foto‚Äôs</h1>
  <button onclick="loadImages()">üîÑ Refresh</button>
</header>

<div id="status">Foto‚Äôs laden‚Ä¶</div>
<div id="grid" class="grid"></div>

<script>
/* ================= CONFIG ================= */

// ‚õîÔ∏è PLAK HIER JE DROPBOX API TOKEN
//const DROPBOX_TOKEN = "sl.u.AGMvno-ouQ8DRcb1iYSXr4PwvLlryzG2LYAgfpalWMfra_crlLn_GggNYxS--4TCQS_FDp5xoYmZpFpZMAwI78uKsHqRVXLEs2IdTeqBOJstydDLGuvmXueIhhBNrN8vfeARuXfreSUsdrDFw1opK__z3Cqd3MJ1Q1wUfVymUdZ0yhQUoJHlph2mhMN0xlO5vFxVxrV6cvcKd-2AXOf-d59zoz2acZ3w4NOAbslPg7lZiwPdM_G3h4Vq3241QabQKZJ_eZG7EveNOuJKepypLHwJK-MVv4a6FFWfNKNpzV2iAs1Dlr5vcqKacvMVxK2Qonsrp4toqc7qiwVEmg3FgWOzoIqdSglTRAENsBb5OedvQ_i9mu_Yn-V--S1vGQPKcUnScOX5DV6ft6vG9FzZBzxhkvBwV6zIyYuNMLqvFnxgFyY-lqdViWke8bzImQKSOVpE_UJsx7iCmnBYfiJkbu6qXkdIW0HoiLeW3yZVRNHOW0FCMQRQUflZphGi0NjR84cGcvuSiemqBdf81i8aJV971drsmUxGS8LHVvG95ZNkijkG0rm0y5PkeLnSpvxmmPRNc_aBOezG_QZjEwFAX3n6a-zetUF-G-jJt9GEjQ6I10UW-FKuqiuc0ZUprWs2foH3nLdHyDWdR6EMcjkAVrePde87-Plva3DoWln383Kzw4Je5AOqFtd3XKA45MpVhRbYcDAiGHzsi2EgDiK3IRL8WLmeLyC0OQ43XHCFrVcw37rtvFG__538xKTS9S4HRGyNPjkDF2cOGlSaEtqE2X4kzbQN2zaZTT0smmOcu_Xms3X38GO9NDO2WtFGsC0S-nEZ_ZK9VizQad3ddmU1eIkmvxZQBnfmsje4g6jSTspuwlvz-nRSQk-JVZXnNXUPo0rhrBlS3kgVtkO6vTq8Ysuoot67Tid-zZDX2eqLhp8riypj0WqTDOHRGe_08rQQfGMrmxDiZ71ndDc9QYsS7uv6wwyOwOxGr5N-0ZBguPEaj_km-HrZ6uWuUV_0bg6vlgJritBcFG1nd7Q_aSyG2UbCRS6dC4NuYyXt4A8kZfRRtNYBAc1noJ8OXBe21bLdeNwrx2ylyAF6R7hfA4HyJYcNlL_xdXOW_cWiCNRzA57lgBGgxSm_hpzoc4O8w1AoH-3kPBDlwZdBqPBJT62lAhq-3-PdfabtVafiKbSHMUY6A_aNeLwPDkD530RMXjofPGD6acTyyNWJ9MipWinpFjy4hkpr5KHu5AR8k0M15VuP9pJmOnxmIn7_8kNJOqAzhT78tiu11TDhYr4-6kfpd3HOihSkPG4o5UeDFbSvSKmFL0AnNsoZ8Cgr08Iqg9vNaFMoNFgxJznhtYSc5UmVVekRs5vca0Kd09A0RtAFxw0EPeteYOqYbTnZ_ALuOqg_Oh3MuBKKxbyGh5vvsBveYbQnv5SaCHwvTQa957ryZgVSLA";
const DROPBOX_TOKEN = "sl.u.AGMvno-ouQ8DRcb1iYSXr4PwvLlryzG2LYAgfpalWMfra_crlLn_GggNYxS--4TCQS_FDp5xoYmZpFpZMAwI78uKsHqRVXLEs2IdTeqBOJstydDLGuvmXueIhhBNrN8vfeARuXfreSUsdrDFw1opK__z3Cqd3MJ1Q1wUfVymUdZ0yhQUoJHlph2mhMN0xlO5vFxVxrV6cvcKd-2AXOf-d59zoz2acZ3w4NOAbslPg7lZiwPdM_G3h4Vq3241QabQKZJ_eZG7EveNOuJKepypLHwJK-MVv4a6FFWfNKNpzV2iAs1Dlr5vcqKacvMVxK2Qonsrp4toqc7qiwVEmg3FgWOzoIqdSglTRAENsBb5OedvQ_i9mu_Yn-V--S1vGQPKcUnScOX5DV6ft6vG9FzZBzxhkvBwV6zIyYuNMLqvFnxgFyY-lqdViWke8bzImQKSOVpE_UJsx7iCmnBYfiJkbu6qXkdIW0HoiLeW3yZVRNHOW0FCMQRQUflZphGi0NjR84cGcvuSiemqBdf81i8aJV971drsmUxGS8LHVvG95ZNkijkG0rm0y5PkeLnSpvxmmPRNc_aBOezG_QZjEwFAX3n6a-zetUF-G-jJt9GEjQ6I10UW-FKuqiuc0ZUprWs2foH3nLdHyDWdR6EMcjkAVrePde87-Plva3DoWln383Kzw4Je5AOqFtd3XKA45MpVhRbYcDAiGHzsi2EgDiK3IRL8WLmeLyC0OQ43XHCFrVcw37rtvFG__538xKTS9S4HRGyNPjkDF2cOGlSaEtqE2X4kzbQN2zaZTT0smmOcu_Xms3X38GO9NDO2WtFGsC0S-nEZ_ZK9VizQad3ddmU1eIkmvxZQBnfmsje4g6jSTspuwlvz-nRSQk-JVZXnNXUPo0rhrBlS3kgVtkO6vTq8Ysuoot67Tid-zZDX2eqLhp8riypj0WqTDOHRGe_08rQQfGMrmxDiZ71ndDc9QYsS7uv6wwyOwOxGr5N-0ZBguPEaj_km-HrZ6uWuUV_0bg6vlgJritBcFG1nd7Q_aSyG2UbCRS6dC4NuYyXt4A8kZfRRtNYBAc1noJ8OXBe21bLdeNwrx2ylyAF6R7hfA4HyJYcNlL_xdXOW_cWiCNRzA57lgBGgxSm_hpzoc4O8w1AoH-3kPBDlwZdBqPBJT62lAhq-3-PdfabtVafiKbSHMUY6A_aNeLwPDkD530RMXjofPGD6acTyyNWJ9MipWinpFjy4hkpr5KHu5AR8k0M15VuP9pJmOnxmIn7_8kNJOqAzhT78tiu11TDhYr4-6kfpd3HOihSkPG4o5UeDFbSvSKmFL0AnNsoZ8Cgr08Iqg9vNaFMoNFgxJznhtYSc5UmVVekRs5vca0Kd09A0RtAFxw0EPeteYOqYbTnZ_ALuOqg_Oh3MuBKKxbyGh5vvsBveYbQnv5SaCHwvTQa957ryZgVSLA";
// pad van je dropbox map
const FOLDER_PATH = "https://www.dropbox.com/scl/fo/vo1ijrqbdmh1oa9kg3tcx/AB6wE6e6kkYyiLoNxA-OpiY?rlkey=b2cdbma7vrsd0uuyp46n9w1mr&st=mu738o2x&dl=0";
//const FOLDER_PATH = "/Apps/FilipBooth";

/* ========================================== */

async function loadImages() {
  const status = document.getElementById("status");
  const grid = document.getElementById("grid");

  status.textContent = "Foto‚Äôs laden‚Ä¶";
  grid.innerHTML = "";

  try {
    const response = await fetch(
      "https://api.dropboxapi.com/2/files/list_folder",
      {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + DROPBOX_TOKEN,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ path: FOLDER_PATH })
      }
    );

    const list = await response.json();
    console.log("Dropbox list_folder response:", list);

    if (!list.entries) {
      throw new Error("Geen geldige Dropbox response");
    }

    const images = list.entries
      .filter(e =>
        e[".tag"] === "file" &&
        e.name.match(/\.(jpg|jpeg|png|webp)$/i)
      )
      .sort((a, b) =>
        b.server_modified.localeCompare(a.server_modified)
      );

    for (const file of images) {
      const linkResponse = await fetch(
        "https://api.dropboxapi.com/2/files/get_temporary_link",
        {
          method: "POST",
          headers: {
            "Authorization": "Bearer " + DROPBOX_TOKEN,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ path: file.path_lower })
        }
      );

      const linkData = await linkResponse.json();

      if (!linkData.link) continue;

      const img = document.createElement("img");
      img.src = linkData.link;
      img.loading = "lazy";

      grid.appendChild(img);
    }

    status.textContent =
      images.length === 0 ? "Geen foto‚Äôs gevonden" : "";

  } catch (err) {
    console.error(err);
    status.textContent =
      "‚ùå Fout bij laden van foto‚Äôs ‚Äì check console";
  }
}

loadImages();
</script>

</body>
</html>
